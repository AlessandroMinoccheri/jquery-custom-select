(function(e){e.fn.extend({customSelect:function(t){var n={width:100,height:19,image:"select.jpg",textAlign:"left",textIndent:"10"};var r=e.extend(n,t);return this.each(function(){var t=r;var n=e(this);var i=e("ul",n);var s=e("li",i);var o=e("span",n);var u=-1;var a=i.find("li").length;var f=e(document);unbind=function(){i.unbind("mouseleave");f.unbind("keyup");f.unbind("click")};var l='<input type="text" value="'+o.text()+'" name="'+n.attr("id")+'" style="display:none"/>';n.append(l);n.css("background","url(img/"+t.image+") no-repeat");n.css("width",t.width);n.css("height",t.height);o.css("text-align",t.textAlign);o.css("margin-left",t.textIndent+"px");i.css("width",t.width);s.css("width",t.width);n.click(function(){i.css("opacity","1");i.css("display","block");i.bind("mouseleave",function(){time=setTimeout(function(){i.animate({opacity:0},500,function(){unbind();i.css("display","none")})},400)});f.bind("keyup",function(e){if(e.keyCode==40){if(u<a-1){u++;i.find("li").removeClass("active");i.find("li:eq("+u+")").addClass("active")}}if(e.keyCode==38){if(u>0){u--;i.find("li").removeClass("active");i.find("li:eq("+u+")").addClass("active")}}});time2=setTimeout(function(){f.bind("click",function(){i.animate({opacity:0},500,function(){unbind();i.css("display","none")})})},400)});s.on("click",function(){unbind();o.text(e(this).text());e('input[name="'+n.attr("id")+'"]').attr("value",e(this).text());i.animate({opacity:0},500,function(){i.css("display","none")})})})}})})(jQuery)